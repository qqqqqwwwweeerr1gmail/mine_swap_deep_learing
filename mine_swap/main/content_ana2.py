
def get_bf_plob(plob_in, action):
    """get back a step view from plob """
    # x,y = int(action[0]),int(action[1])
    x,y = eval(action)
    plob_in[x][y] = '?'
    return plob_in
    # return [['?' if (x, y) == eval(action) else plob[x][y] for y in range(len(plob[0]))] for x in range(len(plob))]


def init_value(plob):
    # select value
    plob_ima = [[y + str(1) if y.startswith('?') else y for y in x] for x in plob]
    return plob_ima


def re_shuffle2col(plob):
    re_plob = [[plob[y][x] for y in range(len(plob))] for x in range(len(plob[0]))]
    return re_plob


def bayes_mine_value(plob, epoch):
    re_plob = re_shuffle2col(plob)
    re_bayes_ima = [['$' if y.startswith('?') else y for y in x] for x in re_plob]
    for i in range(epoch):
        re_sim_env = bayes_sim(re_plob)
        print(re_sim_env)
        # re_sim_env = [[' 2 ', '*'], ['*', '2']]
        # bayes_ima = [[1 if plob[x][y] == '?' else 0 for y in range(len(plob[x]))] for x in range(len(plob))]
        re_bayes_ima = [
            [re_bayes_ima[x][y] + re_sim_env[x][y] if re_bayes_ima[x][y][0] == '$' else re_bayes_ima[x][y] for y in
             range(len(re_bayes_ima[x]))] for x in range(len(re_bayes_ima))]
    return re_bayes_ima


if __name__ == '__main__':

    focus_content = [{'plob': [['1', '0'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '0', '(1, 0)': '#0.5', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['1', '0'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '0', '(1, 0)': '#0.5', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['2', '*'], ['?', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '2', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['1', '1'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '1', '(1, 0)': '#0.5', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['1', '?'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['1', '*'], ['?', '1'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.5', '(1, 0)': '#0.5', '(1, 1)': '1', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['1', '0'], ['*', '2'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '0', '(1, 0)': '#0.6666666666666666', '(1, 1)': '2', '(2, 0)': '#0.6666666666666666', '(2, 1)': '#0.6666666666666666'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['1', '?'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['1', '*'], ['1', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.5', '(1, 0)': '1', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['2', '*'], ['?', '2'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '2', '(0, 1)': '#0.5', '(1, 0)': '#0.5', '(1, 1)': '2', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['2', '*'], ['?', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '2', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['0', '1'], ['?', '*'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '0', '(0, 1)': '1', '(1, 0)': '#0.5', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(1, 1)', 'beneficial': -1}, {'plob': [['1', '?'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['0', '1'], ['2', '*'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '0', '(0, 1)': '1', '(1, 0)': '2', '(1, 1)': '#0.6666666666666666', '(2, 0)': '#0.6666666666666666', '(2, 1)': '#0.6666666666666666'}, 'action': '(1, 1)', 'beneficial': -1}, {'plob': [['0', '0'], ['1', '?'], ['*', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '0', '(0, 1)': '0', '(1, 0)': '1', '(1, 1)': '#0.6666666666666666', '(2, 0)': '#0.6666666666666666', '(2, 1)': '#0.6666666666666666'}, 'action': '(2, 0)', 'beneficial': -1}, {'plob': [['1', '*'], ['1', '1'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.6666666666666666', '(1, 0)': '1', '(1, 1)': '1', '(2, 0)': '#0.6666666666666666', '(2, 1)': '#0.6666666666666666'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['1', '*'], ['1', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.5', '(1, 0)': '1', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['1', '?'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['2', '?'], ['*', '2'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '2', '(0, 1)': '#0.5', '(1, 0)': '#0.5', '(1, 1)': '2', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['1', '*'], ['1', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.5', '(1, 0)': '1', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['1', '?'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['1', '*'], ['1', '1'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.6666666666666666', '(1, 0)': '1', '(1, 1)': '1', '(2, 0)': '#0.6666666666666666', '(2, 1)': '#0.6666666666666666'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['1', '?'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['1', '0'], ['*', '2'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '0', '(1, 0)': '#0.6666666666666666', '(1, 1)': '2', '(2, 0)': '#0.6666666666666666', '(2, 1)': '#0.6666666666666666'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['1', '0'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '0', '(1, 0)': '#0.5', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['1', '*'], ['1', '1'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.6666666666666666', '(1, 0)': '1', '(1, 1)': '1', '(2, 0)': '#0.6666666666666666', '(2, 1)': '#0.6666666666666666'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['2', '*'], ['?', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '2', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['1', '*'], ['1', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.5', '(1, 0)': '1', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['0', '1'], ['2', '?'], ['*', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '0', '(0, 1)': '1', '(1, 0)': '2', '(1, 1)': '#0.6666666666666666', '(2, 0)': '#0.6666666666666666', '(2, 1)': '#0.6666666666666666'}, 'action': '(2, 0)', 'beneficial': -1}, {'plob': [['1', '?'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['0', '1'], ['2', '*'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '0', '(0, 1)': '1', '(1, 0)': '2', '(1, 1)': '#0.6666666666666666', '(2, 0)': '#0.6666666666666666', '(2, 1)': '#0.6666666666666666'}, 'action': '(1, 1)', 'beneficial': -1}, {'plob': [['1', '*'], ['1', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.5', '(1, 0)': '1', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['2', '*'], ['?', '2'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '2', '(0, 1)': '#0.5', '(1, 0)': '#0.5', '(1, 1)': '2', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['1', '?'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['1', '0'], ['*', '2'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '0', '(1, 0)': '#0.6666666666666666', '(1, 1)': '2', '(2, 0)': '#0.6666666666666666', '(2, 1)': '#0.6666666666666666'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['1', '?'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['1', '?'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['1', '?'], ['?', '*'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(1, 1)', 'beneficial': -1}, {'plob': [['1', '*'], ['?', '1'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.5', '(1, 0)': '#0.5', '(1, 1)': '1', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['1', '*'], ['1', '1'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.6666666666666666', '(1, 0)': '1', '(1, 1)': '1', '(2, 0)': '#0.6666666666666666', '(2, 1)': '#0.6666666666666666'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['1', '?'], ['1', '1'], ['*', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.6666666666666666', '(1, 0)': '1', '(1, 1)': '1', '(2, 0)': '#0.6666666666666666', '(2, 1)': '#0.6666666666666666'}, 'action': '(2, 0)', 'beneficial': -1}, {'plob': [['0', '?'], ['2', '*'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '0', '(0, 1)': '#0.5', '(1, 0)': '2', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(1, 1)', 'beneficial': -1}, {'plob': [['1', '1'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '1', '(1, 0)': '#0.5', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['0', '?'], ['2', '*'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '0', '(0, 1)': '#0.5', '(1, 0)': '2', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(1, 1)', 'beneficial': -1}, {'plob': [['1', '?'], ['1', '1'], ['*', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.6666666666666666', '(1, 0)': '1', '(1, 1)': '1', '(2, 0)': '#0.6666666666666666', '(2, 1)': '#0.6666666666666666'}, 'action': '(2, 0)', 'beneficial': -1}, {'plob': [['1', '*'], ['1', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.5', '(1, 0)': '1', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['1', '?'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(1, 0)', 'beneficial': -1}, {'plob': [['0', '?'], ['2', '*'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '0', '(0, 1)': '#0.5', '(1, 0)': '2', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(1, 1)', 'beneficial': -1}, {'plob': [['1', '*'], ['1', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '1', '(0, 1)': '#0.5', '(1, 0)': '1', '(1, 1)': '#0.5', '(2, 0)': '#0.5', '(2, 1)': '#0.5'}, 'action': '(0, 1)', 'beneficial': -1}, {'plob': [['2', '?'], ['*', '?'], ['?', '?']], 'knowledge': '', 'suspect_current': '', 're_rate_dict': {'(0, 0)': '2', '(0, 1)': '#0.4', '(1, 0)': '#0.4', '(1, 1)': '#0.4', '(2, 0)': '#0.4', '(2, 1)': '#0.4'}, 'action': '(1, 0)', 'beneficial': -1}]

    diff_content_ls = []
    for fc in focus_content:
        plob = fc['plob']
        action = fc['action']
        print(plob)
        print(action)
        # [[' 1 ', '?'], [' 1 ', '?'], ['*', '?']]
        # (2, 0)
        bf_plob = get_bf_plob(plob, action)
        print(bf_plob)
        # [[' 1 ', '?'], [' 1 ', '?'], ['?', '?']]

        plob_ima = init_value(bf_plob)
        print(plob_ima)  # is select value
        # [[' 1 ', '?0.1'], [' 1 ', '?0.1'], ['?0.1', '?0.1']]
        re_bayes_ima = bayes_mine_value(fo, 1000)
        print(re_bayes_ima)

















